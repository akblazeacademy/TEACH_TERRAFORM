TERRAFORM AZURE VM IMPORT – COMPLETE PRACTICAL
=============================================

PREREQUISITES
-------------
1. Azure resources already exist:
   - Resource Group
   - Virtual Network
   - Subnet
   - Network Interface
   - OS Disk
   - Linux Virtual Machine

2. Terraform configuration files already created:
   - main.tf
   - variables.tf
   - terraform.tfvars

3. Terraform initialized:
   terraform init


IMPORTANT RULE
--------------
Terraform IMPORT does NOT create resources.
It only maps EXISTING Azure resources into Terraform state.


IMPORT ORDER (VERY IMPORTANT)
-----------------------------
Always import dependencies FIRST.

Correct order:
VNet → Subnet → NIC → Disk → VM


GENERALIZED IMPORT COMMANDS
--------------------------

1) Import Virtual Network (VNet)

terraform import azurerm_virtual_network.vnet \
/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Network/virtualNetworks/<VNET_NAME>


2) Import Subnet

terraform import azurerm_subnet.subnet \
/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Network/virtualNetworks/<VNET_NAME>/subnets/<SUBNET_NAME>


3) Import Network Interface (NIC)

terraform import azurerm_network_interface.nic \
/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Network/networkInterfaces/<NIC_NAME>


4) Import OS Disk (Managed Disk)

terraform import azurerm_managed_disk.osdisk \
/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Compute/disks/<OS_DISK_NAME>


5) Import Linux Virtual Machine (VM)

terraform import azurerm_linux_virtual_machine.vm \
/subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP>/providers/Microsoft.Compute/virtualMachines/<VM_NAME>

6)IMPORT AZURE RG
terraform import azurerm_resource_group.rg \
   /subscriptions/<SUBSCRIPTION_ID>/resourceGroups/<RESOURCE_GROUP_NAME>


POST-IMPORT VERIFICATION
-----------------------
Run the following commands:

terraform refresh
terraform plan

EXPECTED OUTPUT:
Plan: 0 to add, 0 to change, 0 to destroy


COMMON ERRORS & MEANING
----------------------

Error: NicInUse
Meaning: Terraform tried to delete NIC before VM.
Fix: Ensure VM references NIC and depends_on is set.

Error: Disk is attached to VM
Meaning: Terraform tried to delete disk before VM.
Fix: Ensure VM references managed disk and depends_on is set.


GOLDEN RULE (EXAM + INTERVIEW)
------------------------------
"If Terraform didn’t create or import it, Terraform doesn’t own it."


DEPENDENCY CHAIN (MEMORIZE)
---------------------------
VNet → Subnet → NIC → VM
              ↘ Disk ↗


END OF PRACTICAL
================
